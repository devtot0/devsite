# Wymuszenie HTTPS
RewriteEngine On
RewriteCond %{HTTPS} !=on
RewriteRule ^ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301]

# Fallback dla plików HTML - jeśli nie istnieje w głównym katalogu, sprawdź w podstrony/
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_URI} \.html$ [NC]
RewriteCond %{DOCUMENT_ROOT}/podstrony%{REQUEST_URI} -f
RewriteRule ^(.*\.html)$ podstrony/$1 [L]

# Pretty URLs - wszystkie żądania kierowane do index.php (tylko jeśli plik/katalog nie istnieje)
# UWAGA: Ta reguła NIE dotyczy plików HTML, które istnieją - są serwowane bezpośrednio przez Apache
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php [QSA,L]

# Wersja PHP
AddHandler application/x-httpd-php73 .php
